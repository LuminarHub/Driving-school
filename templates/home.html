<!-- templates/home.html -->
{% extends 'base.html' %}

{% block title %}Home - Advanced Motor Driving School{% endblock %}
{% load static %}
{% block content %}

<style>
    /* Custom Colorful Enhancements */
    .gradient-overlay {
        background: linear-gradient(135deg, rgba(33, 150, 243, 0.8), rgba(76, 175, 80, 0.8));
        color: white;
    }

    .course-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border-radius: 15px;
        overflow: hidden;
    }

    .course-card:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }

    .feature-box {
        background: linear-gradient(145deg, #f6f6f6, #e0e0e0);
        border-radius: 15px;
        padding: 30px;
        transition: all 0.3s ease;
    }

    .feature-box:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .cta-section {
        background: linear-gradient(to right, #2196F3, #4CAF50);
        color: white;
        border-radius: 15px;
    }
    .feature-section {
        background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
        padding: 80px 0;
    }

    .feature-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        margin-bottom: 20px;
    }

    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    }

    .feature-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .feature-card:hover .feature-icon {
        transform: rotate(360deg);
    }

    .facts-section {
        background: linear-gradient(to right, #2196F3, #4CAF50);
        color: white;
        padding: 60px 0;
    }

    .fact-card {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 30px;
        text-align: center;
        transition: all 0.3s ease;
    }

    .fact-card:hover {
        transform: scale(1.05);
        background: rgba(255, 255, 255, 0.2);
    }

    .fact-icon {
        font-size: 3rem;
        margin-bottom: 15px;
        color: white;
        opacity: 0.8;
    }

    .feature-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        font-size: 1.5rem; /* Controls icon size */
    }

    .feature-card {
        background: #f8f9fa;
        border-radius: 8px;
    }


</style>

<!-- Carousel Start -->
<div class="container-fluid p-0 wow fadeIn" data-wow-delay="0.1s">
    <div id="header-carousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <!-- First Slide -->
            <div class="carousel-item active">
                <img class="w-100" src="{% static 'img/carousel-1.jpg' %}" alt="Image">
                <div class="carousel-caption">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-7 text-center">
                                <h1 class="display-2 text-light mb-5 animated slideInDown">
                                    Learn To Drive With Confidence
                                </h1>
                                {% if not user.is_authenticated %}
                                    <a href="{% url 'accounts:register' %}" class="btn btn-primary py-sm-3 px-sm-5">Register Now</a>
                                    <a href="{% url 'accounts:login' %}" class="btn btn-light py-sm-3 px-sm-5 ms-2">Login</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Second Slide -->
            <div class="carousel-item">
                <img class="w-100" src="{% static 'img/carousel-2.jpg' %}" alt="Image">
                <div class="carousel-caption">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-7 text-center">
                                <h1 class="display-2 text-light mb-5 animated slideInDown">
                                    Professional Driving Instructors
                                </h1>
                                {% if not user.is_authenticated %}
                                    <a href="{% url 'accounts:register' %}" class="btn btn-primary py-sm-3 px-sm-5">Register Now</a>
                                    <a href="{% url 'accounts:login' %}" class="btn btn-light py-sm-3 px-sm-5 ms-2">Login</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carousel Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#header-carousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#header-carousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
    </div>
</div>
<!-- Carousel End -->

<!-- Colorful Features Start -->
<div class="container-fluid py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.1s">
                <div class="feature-box text-center">
                    <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                        <i class="fa fa-car fa-2x"></i>
                    </div>
                    <h4 class="mb-3">Car Training</h4>
                    <p>Professional driving lessons tailored for beginners and advanced learners.</p>
                </div>
            </div>
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.3s">
                <div class="feature-box text-center">
                    <div class="rounded-circle bg-success text-white d-inline-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                        <i class="fa fa-motorcycle fa-2x"></i>
                    </div>
                    <h4 class="mb-3">Scooty Training</h4>
                    <p>Comprehensive two-wheeler training to ensure safe and confident riding.</p>
                </div>
            </div>
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.5s">
                <div class="feature-box text-center">
                    <div class="rounded-circle bg-info text-white d-inline-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                        <i class="fa fa-book fa-2x"></i>
                    </div>
                    <h4 class="mb-3">Online Tutorials</h4>
                    <p>Digital learning resources to complement your practical driving training.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Colorful Features End -->

 <!-- About Start -->
 <div class="container-xxl py-6">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                <div class="position-relative overflow-hidden ps-5 pt-5 h-100" style="min-height: 400px;">
                    <img class="position-absolute w-100 h-100" src="/static/img/about-1.jpg" alt="Driving Instructor" style="object-fit: cover;">
                    <img class="position-absolute top-0 start-0 bg-white pe-3 pb-3" src="/static/img/about-2.jpg" alt="Student Driver" style="width: 200px; height: 200px;">
                </div>
            </div>
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.5s">
                <div class="h-100">
                    <h6 class="text-primary text-uppercase mb-2">About Us</h6>
                    <h1 class="display-6 mb-4">We Help Students Become Confident & Safe Drivers</h1>
                    <p>Advanced Motor Driving School has been a trusted name in driver education since 2005. Our mission is to create safer roads by training responsible, skilled drivers through comprehensive education and hands-on experience.</p>
                    <p class="mb-4">We pride ourselves on our modern teaching methods, state-of-the-art vehicles, and experienced instructors who are passionate about road safety and driver education.</p>
                    <div class="row g-2 mb-4 pb-2">
                        <div class="col-sm-6">
                            <i class="fa fa-check text-primary me-2"></i>Fully Licensed
                        </div>
                        <div class="col-sm-6">
                            <i class="fa fa-check text-primary me-2"></i>Online Booking System
                        </div>
                        <div class="col-sm-6">
                            <i class="fa fa-check text-primary me-2"></i>Qualified Instructors
                        </div>
                        <div class="col-sm-6">
                            <i class="fa fa-check text-primary me-2"></i>Modern Training Vehicles
                        </div>
                    </div>
                    <div class="row g-4">
                        <div class="col-sm-6">
                            <a class="btn btn-primary py-3 px-5" href="{% url 'students:courses' %}">Book Session</a>
                        </div>
                        <div class="col-sm-6">
                            <a class="d-inline-flex align-items-center btn btn-outline-primary border-2 p-2" href="tel:+0123456789">
                                <span class="flex-shrink-0 btn-square bg-primary">
                                    <i class="fa fa-phone-alt text-white"></i>
                                </span>
                                <span class="px-3">+012 345 6789</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


<!-- Courses Start -->
<div class="container-xxl py-6">
    <div class="container">
        <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
            <h6 class="text-primary text-uppercase mb-2">Our Courses</h6>
            <h1 class="display-6 mb-4">We Provide The Best Driving Training</h1>
        </div>
        <div class="row gy-4 justify-content-center">
            <!-- Course 1 -->
            <div class="col-md-6">
                <div class="feature-card p-4 d-flex align-items-center">
                    <div class="feature-icon bg-primary text-white me-4">
                        <i class="fa fa-road fs-3"></i>
                    </div>
                    <div>
                        <h5 class="mb-2">Basic Driving Course</h5>
                        <p class="text-muted mb-0">Learn the fundamentals of driving with expert trainers.</p>
                        <a href="{% url 'students:courses' %}" class="btn btn-outline-primary mt-2">Check It Out</a>
                    </div>
                </div>
            </div>
            <!-- Course 2 -->
            <div class="col-md-6">
                <div class="feature-card p-4 d-flex align-items-center">
                    <div class="feature-icon bg-success text-white me-4">
                        <i class="fa fa-car fs-3"></i>
                    </div>
                    <div>
                        <h5 class="mb-2">Advanced Driving Course</h5>
                        <p class="text-muted mb-0">Master advanced driving skills with professional training.</p>
                        <a href="{% url 'students:courses' %}" class="btn btn-outline-success mt-2">Check It Out</a>
                    </div>
                </div>
            </div>
            <!-- Course 3 -->
            <div class="col-md-6">
                <div class="feature-card p-4 d-flex align-items-center">
                    <div class="feature-icon bg-info text-white me-4">
                        <i class="fa fa-shield-alt fs-3"></i>
                    </div>
                    <div>
                        <h5 class="mb-2">Defensive Driving Course</h5>
                        <p class="text-muted mb-0">Enhance your road safety skills with defensive driving techniques.</p>
                        <a href="{% url 'students:courses' %}" class="btn btn-outline-info mt-2">Check It Out</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Courses End -->

<!-- Features Section -->
<div class="feature-section container-xxl py-6">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                <div class="section-header mb-5">
                    <h6 class="text-primary text-uppercase mb-2">Why Choose Us</h6>
                    <h1 class="display-6 mb-4">Our Distinctive Advantages</h1>
                    <p class="lead">At Advanced Motor Driving School, we provide an unparalleled driving education experience.</p>
                </div>

                <div class="row gy-4">
                    <div class="col-md-6">
                        <div class="feature-card p-4 d-flex align-items-center">
                            <div class="feature-icon bg-primary text-white me-4">
                                <i class="fa fa-users fs-3"></i>
                            </div>
                            <div>
                                <h5 class="mb-2">Expert Instructors</h5>
                                <p class="text-muted mb-0">Certified professionals with 10+ years of experience.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-card p-4 d-flex align-items-center">
                            <div class="feature-icon bg-success text-white me-4">
                                <i class="fa fa-calendar fs-3"></i>
                            </div>
                            <div>
                                <h5 class="mb-2">Flexible Scheduling</h5>
                                <p class="text-muted mb-0">Convenient time slots to fit your lifestyle.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-card p-4 d-flex align-items-center">
                            <div class="feature-icon bg-info text-white me-4">
                                <i class="fa fa-car fs-3"></i>
                            </div>
                            <div>
                                <h5 class="mb-2">Modern Vehicles</h5>
                                <p class="text-muted mb-0">Late-model cars with advanced safety features.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-card p-4 d-flex align-items-center">
                            <div class="feature-icon bg-warning text-white me-4">
                                <i class="fa fa-book fs-3"></i>
                            </div>
                            <div>
                                <h5 class="mb-2">Online Resources</h5>
                                <p class="text-muted mb-0">Comprehensive digital learning materials.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Image Section -->
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.5s">
                <div class="position-relative h-100 overflow-hidden rounded-4">
                    <img src="/static/img/driving-school2.jpg" class="img-fluid w-100 h-100 object-cover rounded" alt="Driving School">
                    <div class="position-absolute top-0 end-0 m-4">
                        <img src="/static/img/driving.webp" class="img-thumbnail rounded" alt="Driving Lesson" style="max-width: 200px;">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Facts Section -->
<div class="facts-section container-fluid py-6">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.1s">
                <div class="fact-card">
                    <div class="fact-icon">
                        <i class="fa fa-car"></i>
                    </div>
                    <h4 class="text-white mb-3">Modern Fleet</h4>
                    <p>State-of-the-art vehicles with cutting-edge safety technology.</p>
                </div>
            </div>
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.3s">
                <div class="fact-card">
                    <div class="fact-icon">
                        <i class="fa fa-users"></i>
                    </div>
                    <h4 class="text-white mb-3">Certified Trainers</h4>
                    <p>Professional instructors with extensive training and certification.</p>
                </div>
            </div>
            <div class="col-lg-4 wow fadeIn" data-wow-delay="0.5s">
                <div class="fact-card">
                    <div class="fact-icon">
                        <i class="fa fa-trophy"></i>
                    </div>
                    <h4 class="text-white mb-3">High Success Rate</h4>
                    <p>95% first-time pass rate for driving license examinations.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Call to Action Start -->
<div class="container-xxl py-6 wow fadeInUp" data-wow-delay="0.1s">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                <h6 class="text-primary text-uppercase mb-2">Call To Action</h6>
                <h1 class="display-6 mb-4">Ready to start your driving journey with us?</h1>
                <p class="mb-5">Join our driving school today and learn from the best instructors. We offer flexible schedules and personalized training programs to meet your specific needs.</p>
                {% if not user.is_authenticated %}
                <a href="{% url 'accounts:register' %}" class="btn btn-primary py-3 px-5">Register Now<i class="fa fa-arrow-right ms-2"></i></a>
                {% else %}
                <a href="{% url 'students:courses' %}" class="btn btn-primary py-3 px-5">Book a Session<i class="fa fa-arrow-right ms-2"></i></a>
                {% endif %}
            </div>
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.5s">
                <div class="position-relative overflow-hidden pe-5 h-100" style="min-height: 400px;">
                    <img class="position-absolute w-100 h-100" src="/static/img/Driving-Schools.webp" alt="" style="object-fit: cover;">
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Razorpay Script & Payment Logic -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    function payNow(packageId) {
        const id = parseInt(packageId);  // Just to be safe
        fetch("{% url 'students:initiate_payment' %}", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": "{{ csrf_token }}"
            },
            body: JSON.stringify({ package: id })
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                alert(data.error);
                return;
            }

            const options = {
                key: data.razorpay_key,
                amount: data.amount,
                currency: data.currency,
                name: "Driving School",
                description: "Training Package Payment",
                order_id: data.order_id,
                handler: function (response) {
                    fetch("{% url 'students:verify_payment' %}", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            razorpay_order_id: data.order_id,
                            razorpay_payment_id: response.razorpay_payment_id,
                            razorpay_signature: response.razorpay_signature
                        })
                    })
                    .then(res => res.json())
                    .then(result => {
                        if (result.status === "success") {
                            alert("✅ Payment successful! Redirecting...");
                            window.location.href = "{% url 'students:dashboard' %}";
                        } else {
                            alert("❌ Payment verification failed!");
                        }
                    });
                },
                theme: {
                    color: "#0d6efd"
                }
            };

            const rzp = new Razorpay(options);
            rzp.open();
        });
    }
</script>
<!-- Call to Action End -->
{% endblock %}